(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{j8IE:function(e,t,n){e.exports={btnGroup:"antd-pro-web-ui-src-pages-device-install-index-btnGroup",btnItem:"antd-pro-web-ui-src-pages-device-install-index-btnItem"}},qd0E:function(e,t,n){"use strict";var a=n("g09b"),l=n("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("IzEo");var i=a(n("bx4M"));n("g9YV");var d=a(n("wCAj"));n("+L6B");var o=a(n("2/Rp")),c=a(n("2Taf")),r=a(n("vZ4D")),s=a(n("l4Ni")),u=a(n("ujKo")),f=a(n("rlhR")),p=a(n("MhPg"));n("2qtc");var h,m,g,v=a(n("kLXV")),b=l(n("q1tI")),I=n("MuoO"),y=a(n("3a4m")),w=a(n("j8IE")),E=a(n("vqzs")),k=v.default.confirm,C=(h=(0,I.connect)(function(e){var t=e.install,n=e.loading;return{install:t,loading:n.models.install}}),h((g=function(e){function t(){var e,n;(0,c.default)(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return n=(0,s.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(l))),n.columns=[{title:"\u5e8f\u53f7",width:50,align:"center",key:"Id",dataIndex:"Id",fixed:"left",render:function(e,t,n){return n+1}},{title:"\u8bbe\u5907\u5e8f\u5217\u53f7",dataIndex:"SerialNumber",align:"center"},{title:"\u5b89\u88c5\u4f4d\u7f6e",dataIndex:"DeviceAddress",align:"center"},{title:"\u7ecf\u7eac\u5ea6",align:"center",render:function(e,t,n){return"".concat(t.Lat,",").concat(t.Lon)}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"UpdateDate",align:"center"},{title:"\u66f4\u65b0\u4eba",dataIndex:"UpdateBy",align:"center"},{title:"\u64cd\u4f5c",width:180,align:"center",render:function(e,t,a){return b.default.createElement("div",null,b.default.createElement(o.default,{icon:"edit",onClick:function(){return n.edit(t)},size:"small",ghost:!0,type:"primary"},"\u7f16\u8f91"),b.default.createElement(o.default,{icon:"delete",onClick:function(){return n.showConfirm(t)},size:"small",ghost:!0,type:"danger",style:{marginLeft:"".concat(6,"px")}},"\u5220\u9664"))}}],n.state={globalSettingVisible:!1,pos:null},n.getInstallDeviceList=function(){var e=n.props.dispatch;e({type:"install/fetchInstalledDevice"})},n.add=function(){y.default.push("/device/install/add")},n.edit=function(e){y.default.push({pathname:"/device/install/edit",state:e})},n.deleteInstallDevice=function(e){var t=n.props.dispatch;t({type:"install/deleteBySeriaNumber",payload:e}).then(function(e){e&&n.refresh()})},n.refresh=function(){n.getInstallDeviceList()},n.showConfirm=function(e){var t=(0,f.default)(n);k({mask:!0,title:"\u5220\u9664\u8bbe\u5907\u5b89\u88c5\u4fe1\u606f?",content:"\u70b9\u51fb\u786e\u5b9a\uff0c\u5c06\u4f1a\u5220\u9664\u8bbe\u5907\u5b89\u88c5\u4fe1\u606f\uff0c\u8bbe\u5907\u7ba1\u7406\u5217\u8868\u4e2d\u5c06\u4f1a\u65e0\u6cd5\u663e\u793a\u8bbe\u5907\u4f4d\u7f6e",onOk:function(){t.deleteInstallDevice(e.Id)},onCancel:function(){}})},n.showMap=function(){n.setState({globalSettingVisible:!0})},n.handleGlobalSettingCancel=function(){n.setState({globalSettingVisible:!1})},n}return(0,p.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.getInstallDeviceList()}},{key:"render",value:function(){var e=this.props,t=e.install,n=e.loading,a=this.state,l=a.globalSettingVisible,c=(a.pos,[]);return t.deviceInstallList.forEach(function(e){c.push({lat:e.Lat,lng:e.Lon})}),b.default.createElement("div",null,b.default.createElement(i.default,{title:"\u8bbe\u5907\u5b89\u88c5\u4f4d\u7f6e\u4fe1\u606f\u5f55\u5165"},b.default.createElement("div",{className:w.default.btnGroup},b.default.createElement(o.default,{icon:"plus",onClick:this.add,className:w.default.btnItem,type:"primary",ghost:!0},"\u6dfb\u52a0"),b.default.createElement(o.default,{icon:"global",onClick:this.showMap,className:w.default.btnItem,type:"primary",ghost:!0},"\u5730\u56fe\u663e\u793a"),b.default.createElement(o.default,{icon:"sync",onClick:this.refresh,className:w.default.btnItem,type:"primary",ghost:!0},"\u5237\u65b0")),b.default.createElement(d.default,{rowKey:"Id",bordered:!0,size:"small",loading:n,dataSource:t.deviceInstallList,columns:this.columns})),b.default.createElement(v.default,{visible:l,title:"\u5206\u5e03\u60c5\u51b5",width:1024,onCancel:this.handleGlobalSettingCancel,footer:[b.default.createElement(o.default,{key:"back",onClick:this.handleGlobalSettingCancel},"\u5173\u95ed")]},b.default.createElement(E.default,{loading:n,searchShow:"none",value:c,onChange:this.setPoint})))}}]),t}(b.Component),m=g))||m),S=C;t.default=S}}]);