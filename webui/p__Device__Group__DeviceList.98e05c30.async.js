(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{FUOx:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Xi6J");var i=l(a("kl6h"));a("7Kak");var r=l(a("9yH6"));a("8dk+");var d=l(a("eZ87"));a("OaEy");var o=l(a("2fM7"));a("IzEo");var u=l(a("bx4M"));a("g9YV");var c=l(a("wCAj"));a("+L6B");var s=l(a("2/Rp"));a("+BJd");var f=l(a("mr32")),p=l(a("2Taf")),m=l(a("vZ4D")),h=l(a("l4Ni")),v=l(a("ujKo")),g=l(a("rlhR")),y=l(a("MhPg"));a("y8nQ");var b=l(a("Vl3Y"));a("2qtc");var E,k,S,w,I=l(a("kLXV")),V=n(a("q1tI")),D=a("MuoO"),C=l(a("kSVv")),x=l(a("K52e")),L=l(a("tZEJ")),M=l(a("wd/R")),A=l(a("vqzs")),O=I.default.confirm,G=(E=b.default.create(),k=(0,D.connect)(function(e){var t=e.device,a=e.group,l=e.loading;return{device:t,group:a,loading:l.models.device}}),E(S=k((w=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return a=(0,h.default)(this,(e=(0,v.default)(t)).call.apply(e,[this].concat(n))),a.columns=[{title:"\u5e8f\u53f7",width:50,align:"center",key:"DeviceId",dataIndex:"DeviceId",fixed:"left",render:function(e,t,a){return a+1}},{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"DeviceName",align:"left",fixed:"left",width:140},{title:"\u8fde\u63a5\u53c2\u6570",align:"center",fixed:"left",width:180,render:function(e,t){return"".concat(t.DeviceIp,":").concat(t.DevicePort)}},{title:"\u5e8f\u5217\u53f7",dataIndex:"SerialNumber",align:"center",width:150},{title:"\u72b6\u6001",dataIndex:"DeviceStatus",align:"center",width:80,render:function(e,t){switch(e){case 1:return V.default.createElement(f.default,{color:"green"},"\u5728\u7ebf");case 2:return V.default.createElement(f.default,{color:"red"},"\u706f\u73e0\u5f02\u5e38");case 3:return V.default.createElement(f.default,{color:"red"},"\u6e29\u5ea6\u5f02\u5e38");default:return V.default.createElement(f.default,{color:"red"},"\u79bb\u7ebf")}}},{title:"\u5c5e\u6027",dataIndex:"DeviceAttribute",align:"center",width:60,render:function(e,t){switch(e){case 1:return"\u5e38\u4eae";case 2:return"\u9891\u95ea";case 3:return"\u7206\u95ea";default:return"-"}}},{title:"\u529f\u7387",dataIndex:"DevicePower",align:"center",width:80},{title:"\u8865\u5149\u6a21\u5f0f",dataIndex:"LightMode",align:"center",width:100,render:function(e,t){if(3===t.DeviceAttribute)return"-";switch(e){case 1:return"\u5149\u654f\u63a7\u5236";case 2:return"\u5b9a\u65f6\u63a7\u5236";case 3:return"\u5168\u5929\u5e38\u4eae";default:return"-"}}},{title:"\u5149\u654f\u9600\u503c",dataIndex:"DeviceLightThreshold",align:"center",width:80,render:function(e,t){return 3!==t.DeviceAttribute&&1===t.LightMode?e:"-"}},{title:"\u4eae\u5ea6",dataIndex:"DeviceBrightness",width:50,align:"center",render:function(e,t){return 1===t.DeviceAttribute?e:"-"}},{title:"\u7206\u95ea\u65f6\u95f4",dataIndex:"FlashDuration",width:80,align:"center",render:function(e,t){return 3===t.DeviceAttribute?e:"-"}},{title:"\u7206\u95ea\u6b21\u6570",dataIndex:"StrobeCount",width:80,align:"center",render:function(e,t){return 3===t.DeviceAttribute?e:"-"}},{title:"\u6e29\u5ea6",dataIndex:"DeviceTemperature",width:50,align:"center"},{title:"\u5206\u7ec4",dataIndex:"GroupName",align:"left",width:230},{title:"\u64cd\u4f5c",width:180,fixed:"right",align:"center",render:function(e,t,l){return V.default.createElement("div",null,V.default.createElement(s.default,{onClick:function(){return a.showTransferModal(t)},icon:"swap",size:"small",ghost:!0,type:"primary"},"\u8f6c\u79fb"),V.default.createElement(s.default,{onClick:function(){return a.remove(t)},size:"small",icon:"delete",ghost:!0,type:"danger",style:{marginLeft:"".concat(6,"px")}},"\u5254\u9664"))}}],a.getAddedDevice=function(e){var t=a.props.dispatch;t({type:"device/getAddedDevice",payload:e})},a.remove=function(e){var t=(0,g.default)(a);O({title:"\u4ece\u5206\u7ec4\u4e2d\u5220\u9664\u8bbe\u5907?",content:"\u70b9\u51fb\u786e\u5b9a\uff0c\u5c06\u4f1a\u4ece\u5206\u7ec4\u4e2d\u79fb\u9664\u8bbe\u5907\uff0c\u8bbe\u5907\u5206\u7ec4\u4fe1\u606f\u8bbe\u7f6e\u4e3a\u672a\u5206\u7ec4",onOk:function(){t.removeDevice(e)},onCancel:function(){}})},a.removeDevice=function(e){var t=a.props.dispatch;t({type:"device/removeDeviceFromGroup",payload:e.DeviceId}).then(function(){var e=a.props.location.state.GroupId;a.getAddedDevice(e),t({type:"device/getUngroupDeviceList"})})},a.refresh=function(){var e=a.props.location.state.GroupId;a.getAddedDevice(e)},a.onSelect=function(e){1===e?a.setState({autoVisual:"inline",explosionVisual:"none",modeVisual:"inline",singleVisual:"none"}):3===e?a.setState({autoVisual:"none",explosionVisual:"block",modeVisual:"none",singleVisual:"inline"}):a.setState({autoVisual:"none",explosionVisual:"none",modeVisual:"inline",singleVisual:"inline"})},a.state={modalLoading:!1,visible:!1,transferVisible:!1,globalSettingVisible:!1,autoVisual:"none",lightSenseVisual:"none",timerVisual:"none",singleVisual:"none",explosionVisual:"",modeVisual:"block",deviceId:"",lightMode:1,mapVisual:!1},a.showAddDeviceModal=function(){return a.setState({visible:!0})},a.closeAddDeviceModal=function(){return a.setState({visible:!1})},a.showGlobalSettingModal=function(){a.setState({globalSettingVisible:!0,autoVisual:"inline",explosionVisual:"none",modeVisual:"inline",singleVisual:"none",lightMode:1,lightSenseVisual:"block",timerVisual:"none"})},a.showTransferModal=function(e){a.setState({transferVisible:!0,deviceId:e.DeviceId})},a.handleTransferCancel=function(){a.setState({transferVisible:!1})},a.handleSubmit=function(e){var t=a.props.dispatch,l=a.props.location.state.GroupId;e.AutoStartTime=(0,M.default)(e.AutoStartTime,"HH:mm").format("HH:mm"),e.AutoEndTime=(0,M.default)(e.AutoEndTime,"HH:mm").format("HH:mm"),e.GroupId=l,t({type:"device/globalSettingDevice",payload:e})},a.handleGlobalSettingOk=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){null==e&&a.handleSubmit(t)}),a.setState({globalSettingVisible:!1})},a.handleGlobalSettingCancel=function(){a.setState({globalSettingVisible:!1})},a.lightModeChange=function(e){var t=e.target.value;0!==t?(1===t?a.setState({lightSenseVisual:"block"}):a.setState({lightSenseVisual:"none"}),2===t?a.setState({timerVisual:"block"}):a.setState({timerVisual:"none"})):a.setState({lightSenseVisual:"none",timerVisual:"none"})},a.showMap=function(){a.setState({mapVisual:!0})},a.handleMapCancle=function(){a.setState({mapVisual:!1})},a}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.state.GroupId;this.getAddedDevice(e)}},{key:"render",value:function(){var e=this.props,t=e.device,a=e.loading,l=this.props.form.getFieldDecorator,n=this.props.location.state.GroupId,f=this.state,p=f.mapVisual,m=f.visible,h=f.deviceId,v=f.modalLoading,g=f.explosionVisual,y=f.modeVisual,E=f.transferVisible,k=f.globalSettingVisible,S=f.autoVisual,w=f.lightSenseVisual,D=f.timerVisual,O=(f.singleVisual,{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6"}),G=[{key:1,value:"\u5e38\u4eae"},{key:2,value:"\u9891\u95ea"},{key:3,value:"\u7206\u95ea"}],T={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},H={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13",14:"14",15:"15",16:"16",17:"17",18:"18",19:"19",20:"20"},N=[];return t.addedDeviceList.forEach(function(e){N.push({lat:e.Latitude,lng:e.Longitude})}),V.default.createElement("div",null,V.default.createElement(u.default,{title:"\u5206\u7ec4\u5185\u90e8\u8bbe\u5907\u7ba1\u7406"},V.default.createElement("div",{className:C.default.btnGroup},V.default.createElement(s.default,{onClick:this.showAddDeviceModal,icon:"plus",className:C.default.btnItem,type:"primary",ghost:!0},"\u6dfb\u52a0\u8bbe\u5907"),V.default.createElement(s.default,{onClick:this.showGlobalSettingModal,icon:"setting",className:C.default.btnItem,type:"primary",ghost:!0},"\u7edf\u4e00\u8bbe\u7f6e"),V.default.createElement(s.default,{icon:"global",onClick:this.showMap,className:C.default.btnItem,type:"primary",ghost:!0},"\u5730\u56fe\u663e\u793a"),V.default.createElement(s.default,{onClick:this.refresh,icon:"sync",className:C.default.btnItem,type:"primary",ghost:!0},"\u5237\u65b0")),V.default.createElement(c.default,{rowKey:"DeviceId",bordered:!0,size:"small",loading:a,scroll:{x:1670},dataSource:t.addedDeviceList,columns:this.columns})),V.default.createElement(x.default,{visible:m,close:this.closeAddDeviceModal,groupId:n}),V.default.createElement(L.default,{visible:E,close:this.handleTransferCancel,refresh:this.refresh,deviceId:h}),V.default.createElement(I.default,{visible:k,title:"\u7edf\u4e00\u8bbe\u7f6e",width:660,onOk:this.handleGlobalSettingOk,onCancel:this.handleGlobalSettingCancel,footer:[V.default.createElement(s.default,{key:"back",onClick:this.handleGlobalSettingCancel},"\u5173\u95ed"),V.default.createElement(s.default,{key:"submit",type:"primary",loading:v,onClick:this.handleGlobalSettingOk},"\u63d0\u4ea4")]},V.default.createElement(b.default,{labelCol:{span:5},wrapperCol:{span:19},onSubmit:this.handleSubmit},V.default.createElement(b.default.Item,{label:"\u5c5e\u6027"},l("DeviceAttribute",{initialValue:1})(V.default.createElement(o.default,{style:{width:"100%"},optionFilterProp:"children",onSelect:this.onSelect,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},G.map(function(e){return V.default.createElement(o.default.Option,{key:e.key,value:e.key},e.value,V.default.createElement("span",{style:{color:"#cccccc"}},"-(\u7f16\u7801\uff1a",e.key,")"))})))),V.default.createElement("div",{style:{display:S}},V.default.createElement(b.default.Item,{label:"\u4eae\u5ea6"},l("DeviceBrightness",{initialValue:1,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u706f\u4eae\u5ea6"}]})(V.default.createElement(d.default,{max:20,min:1,marks:H,step:null})))),V.default.createElement("div",{style:{display:g}},V.default.createElement(b.default.Item,{label:"\u7206\u95ea\u65f6\u95f4"},l("FlashDuration",{initialValue:1,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u706f\u4eae\u5ea6"}]})(V.default.createElement(d.default,{max:10,min:1,marks:T,step:null})))),V.default.createElement("div",{style:{display:y}},V.default.createElement(b.default.Item,{label:"\u8865\u5149\u6a21\u5f0f"},l("LightMode",{initialValue:1})(V.default.createElement(r.default.Group,{onChange:this.lightModeChange},V.default.createElement(r.default,{value:1},"\u81ea\u52a8\u68c0\u6d4b\u4eae\u5ea6\u63a7\u5236\u8865\u5149\u706f"),V.default.createElement(r.default,{value:2},"\u6309\u65f6\u95f4\u542f\u7528\u8865\u5149\u706f"),V.default.createElement(r.default,{value:3,style:{display:S}},"\u5168\u5929\u5e38\u4eae")))),V.default.createElement(b.default.Item,{style:{display:w},label:"\u5149\u654f\u9600\u503c"},l("DeviceLightThreshold",{initialValue:1,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5149\u654f\u9600\u503c"}]})(V.default.createElement(d.default,{max:6,min:1,marks:O,step:null}))),V.default.createElement(b.default.Item,{style:{display:D},label:"\u5b9a\u65f6\u5f00\u542f\u65f6\u95f4\u8303\u56f4"},V.default.createElement("div",{style:{width:"100%"}},"\u5f00\u59cb\u65f6\u95f4\uff1a",l("AutoStartTime",{initialValue:(0,M.default)("18:00","HH:mm"),rules:[{required:!1,message:"\u5f00\u59cb\u65f6\u95f4"}]})(V.default.createElement(i.default,{minuteStep:1,format:"HH:mm"})),"\xa0\xa0-\xa0 \u7ed3\u675f\u65f6\u95f4\uff1a",l("AutoEndTime",{initialValue:(0,M.default)("06:00","HH:mm"),rules:[{required:!1,message:"\u7ed3\u675f\u65f6\u95f4"}]})(V.default.createElement(i.default,{minuteStep:1,format:"HH:mm"}))))))),V.default.createElement(I.default,{visible:p,title:"\u5206\u5e03\u60c5\u51b5",width:1024,onCancel:this.handleMapCancle,footer:[V.default.createElement(s.default,{key:"back",onClick:this.handleMapCancle},"\u5173\u95ed")]},V.default.createElement(A.default,{loading:a,searchShow:"none",value:N,onChange:this.setPoint})))}}]),t}(V.Component),S=w))||S)||S),T=G;t.default=T},K52e:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV")),r=l(a("eHn4"));a("g9YV");var d=l(a("wCAj"));a("+L6B");var o,u,c,s=l(a("2/Rp")),f=l(a("2Taf")),p=l(a("vZ4D")),m=l(a("l4Ni")),h=l(a("ujKo")),v=l(a("MhPg")),g=n(a("q1tI")),y=a("MuoO"),b=(o=(0,y.connect)(function(e){var t=e.device,a=e.loading;return{device:t,loading:a.models.device}}),o((c=function(e){function t(){var e,a;(0,f.default)(this,t);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return a=(0,m.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(n))),a.state={rowSelectionList:[],selectedRowKeys:[],groupId:a.props.groupId},a.handleOk=function(){var e=a.state.rowSelectionList;e.forEach(function(e,t){e.GroupId=a.state.groupId}),a.setState({modalLoading:!0});var t=a.props.dispatch;t({type:"device/addDeviceToGroup",payload:e}).then(function(e){a.handleCancel(),a.setState({modalLoading:!1,rowSelectionList:[]}),t({type:"device/getUngroupDeviceList"}),t({type:"device/getAddedDevice",payload:a.state.groupId})})},a.handleCancel=function(){var e=a.props.close;e()},a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"device/getUngroupDeviceList"})}},{key:"render",value:function(){var e,t=this,a=this.props,l=a.device,n=a.visible,o=this.state,u=o.modalLoading,c=o.selectedRowKeys,f=[{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"DeviceName"},{title:"IP\u5730\u5740",dataIndex:"DeviceIp",width:140},{title:"IP\u7aef\u53e3",dataIndex:"DevicePort",width:80},{title:"\u5e8f\u5217\u53f7",dataIndex:"SerialNumber",width:200}],p={selectedRowKeys:c,onChange:function(e,a){t.setState({rowSelectionList:a,selectedRowKeys:e})}};return g.default.createElement(i.default,{visible:n,title:"\u6dfb\u52a0\u8bbe\u5907\uff08\u53ea\u80fd\u6dfb\u52a0\u672a\u5206\u7ec4\u8bbe\u5907\uff09",onOk:this.handleOk,onCancel:this.handleCancel,width:800,footer:[g.default.createElement(s.default,{key:"back",onClick:this.handleCancel},"\u5173\u95ed"),g.default.createElement(s.default,{key:"submit",type:"primary",loading:u,onClick:this.handleOk},"\u6dfb\u52a0")]},g.default.createElement(d.default,(e={rowSelection:{},columns:f},(0,r.default)(e,"rowSelection",p),(0,r.default)(e,"dataSource",l.ungroupDeviceList),(0,r.default)(e,"size","small"),e)))}}]),t}(g.Component),u=c))||u),E=b;t.default=E},tZEJ:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV"));a("OaEy");var r=l(a("2fM7"));a("+L6B");var d,o,u,c=l(a("2/Rp")),s=l(a("2Taf")),f=l(a("vZ4D")),p=l(a("l4Ni")),m=l(a("ujKo")),h=l(a("MhPg")),v=n(a("q1tI")),g=a("MuoO"),y=(d=(0,g.connect)(function(e){var t=e.device,a=e.group,l=e.loading;return{device:t,group:a,loading:l.models.device}}),d((u=function(e){function t(){var e,a;(0,s.default)(this,t);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return a=(0,p.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(n))),a.state={groupId:""},a.onChange=function(e){a.setState({groupId:e})},a.handleTransferOk=function(){var e=a.props.dispatch,t={};t.GroupId=a.state.groupId,t.DeviceId=a.props.deviceId,e({type:"device/changeGroup",payload:t}).then(function(){a.handleCancel(),a.handleRefresh()})},a.handleCancel=function(){var e=a.props.close;e()},a.handleRefresh=function(){var e=a.props.refresh;e()},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.group,l=e.loading;return v.default.createElement(i.default,{visible:t,title:"\u8f6c\u79fb\u5206\u7ec4",onOk:this.handleTransferOk,onCancel:this.handleCancel,footer:[v.default.createElement(c.default,{key:"back",onClick:this.handleCancel},"\u5173\u95ed"),v.default.createElement(c.default,{key:"submit",type:"primary",loading:l,onClick:this.handleTransferOk},"\u63d0\u4ea4")]},v.default.createElement("b",null,"\u5206\u7ec4\u5217\u8868:"),v.default.createElement("br",null),v.default.createElement("br",null),v.default.createElement(r.default,{showSearch:!0,style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u76ee\u6807\u5206\u7ec4",optionFilterProp:"children",onChange:this.onChange,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},a.groupList.map(function(e){return v.default.createElement(r.default.Option,{key:e.GroupId,value:e.GroupId},e.GroupName,v.default.createElement("span",{style:{color:"#cccccc"}},"-(\u7f16\u53f7\uff1a",e.GroupId,")"))})),v.default.createElement("br",null),v.default.createElement("br",null))}}]),t}(v.Component),o=u))||o),b=y;t.default=b}}]);