(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{NClA:function(e,t,a){"use strict";var n=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=n(a("wCAj"));a("IzEo");var c=n(a("bx4M"));a("14J3");var d=n(a("BMrR"));a("BoS7");var r=n(a("Sdc0"));a("jCWc");var s=n(a("kPKH"));a("aHsQ");var u=n(a("sGsY"));a("+L6B");var o,f,h,v=n(a("2/Rp")),m=n(a("2Taf")),p=n(a("vZ4D")),g=n(a("l4Ni")),w=n(a("ujKo")),y=n(a("MhPg")),k=i(a("q1tI")),I=a("MuoO"),b=n(a("3a4m")),C=n(a("Wa4K")),E=(o=(0,I.connect)(function(e){var t=e.device,a=e.loading;return{device:t,loading:a.models.device}}),o((h=function(e){function t(){var e,a;(0,m.default)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return a=(0,g.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(i))),a.state={scanList:[],showList:[],switchChecked:!0,timer:""},a.columns=[{title:"\u5e8f\u53f7",width:50,align:"center",dataIndex:"id",render:function(e,t,a){return a+1}},{title:"\u5e8f\u5217\u53f7",dataIndex:"SerialNumber",align:"center"},{title:"\u8bbe\u5907IP",dataIndex:"DeviceIp",align:"center"},{title:"\u7aef\u53e3",dataIndex:"DevicePort",align:"right"},{title:"MAC\u5730\u5740",dataIndex:"MacAddr",align:"center"},{title:"\u4e3b\u63a7\u7248\u672c",dataIndex:"FirmwareVersion",align:"center"},{title:"\u63a9\u7801",dataIndex:"Mask",align:"center"},{title:"\u7f51\u5173",dataIndex:"GatewayAddr",align:"center"},{title:"\u5df2\u6dfb\u52a0",dataIndex:"IsAdded",align:"center",render:function(e,t){return!0===e?"\u662f":"\u5426"}},{title:"\u64cd\u4f5c",width:260,align:"center",render:function(e,t,n){return t.IsAdded?k.default.createElement("div",null,"--"):k.default.createElement("div",null,k.default.createElement(v.default,{onClick:function(){return a.openInstall(t.SerialNumber)},size:"small",ghost:!0,type:"primary",style:{marginLeft:"6px"}},"\u5730\u56fe"),k.default.createElement(v.default,{style:{display:function(){return t.enable?"none":"block"}},onClick:function(){return a.add(t)},icon:"plus",size:"small",ghost:!0,type:"primary"},"\u6dfb\u52a0"),k.default.createElement(v.default,{onClick:function(){return a.edit(t)},size:"small",ghost:!0,icon:"edit",type:"primary",style:{marginLeft:"".concat(6,"px")}},"\u7f16\u8f91"))}}],a.getScanDeviceList=function(){var e=a.props,t=e.dispatch,n=e.device;t({type:"device/fetch"}).then(function(){a.setState({scanList:n.scanDeviceList,showList:n.scanDeviceList,switchChecked:!0})})},a.add=function(e){b.default.push({pathname:"/device/scan/add",state:e})},a.edit=function(e){b.default.push({pathname:"/device/scan/edit",state:e})},a.onChange=function(e){var t=a.state.scanList;if(e)a.setState({showList:t,switchChecked:e});else{var n=[];t.forEach(function(e,t){e.IsAdded||n.push(e)}),a.setState({showList:n,switchChecked:e})}},a.refresh=function(){a.getScanDeviceList()},a.openInstall=function(e){b.default.push({pathname:"/device/install/view",state:{SerialNumber:e,backUrl:"/event/lamp"}})},a}return(0,y.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.device;a({type:"device/fetch"}).then(function(){e.setState({scanList:n.scanDeviceList,showList:n.scanDeviceList,switchChecked:!0},function(){e.refresh()})});var i=setInterval(function(){e.refresh()},9e3);this.setState({timer:i})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"render",value:function(){var e=this.props,t=e.device,a=e.loading,n=t.scanDeviceList.length,i=t.totalDevices,o=t.scanDeviceList.length;"number"===typeof i&&(o=t.scanDeviceList.length-t.totalDevices,o=o<0?0:o);var f=this.state,h=f.showList,m=f.switchChecked;return k.default.createElement("div",null,k.default.createElement(c.default,{title:"\u626b\u63cf\u8bbe\u5907"},k.default.createElement(d.default,{gutter:24},k.default.createElement(s.default,{span:8},k.default.createElement(u.default,{title:"\u5728\u7ebf\u8bbe\u5907\u603b\u6570",value:n})),k.default.createElement(s.default,{span:8},k.default.createElement(u.default,{title:"\u5df2\u6dfb\u52a0\u8bbe\u5907\u603b\u6570",value:i})),k.default.createElement(s.default,{span:8},k.default.createElement(u.default,{title:"\u672a\u6dfb\u52a0\u8bbe\u5907\u603b\u6570",value:o}),k.default.createElement("div",{style:{marginTop:16}},k.default.createElement(r.default,{checkedChildren:"\u663e\u793a\u5168\u90e8\u626b\u63cf\u8bbe\u5907",unCheckedChildren:"\u53ea\u663e\u793a\u672a\u6dfb\u52a0\u8bbe\u5907",defaultChecked:!0,checked:m,onChange:this.onChange}))))),k.default.createElement(c.default,null,k.default.createElement("div",{className:C.default.btnGroup},k.default.createElement(v.default,{onClick:this.refresh,className:C.default.btnItem,icon:"sync",type:"primary",ghost:!0},"\u5237\u65b0")),k.default.createElement(l.default,{rowKey:function(e){return e.SerialNumber},bordered:!0,size:"small",loading:a,dataSource:h,columns:this.columns})))}}]),t}(k.Component),f=h))||f),L=E;t.default=L},Wa4K:function(e,t,a){e.exports={btnGroup:"antd-pro-web-ui-src-pages-device-scan-index-btnGroup",btnItem:"antd-pro-web-ui-src-pages-device-scan-index-btnItem"}}}]);