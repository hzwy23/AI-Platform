(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"K/z9":function(e,t,n){e.exports={btnGroup:"antd-pro-web-ui-src-pages-device-manage-index-btnGroup",btnItem:"antd-pro-web-ui-src-pages-device-manage-index-btnItem"}},NzeY:function(e,t,n){"use strict";var a=n("g09b"),r=n("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("IzEo");var l=a(n("bx4M"));n("g9YV");var d=a(n("wCAj"));n("+L6B");var i=a(n("2/Rp"));n("Pwec");var u=a(n("CtXQ"));n("+BJd");var c=a(n("mr32")),o=a(n("2Taf")),f=a(n("vZ4D")),s=a(n("l4Ni")),m=a(n("ujKo")),v=a(n("rlhR")),h=a(n("MhPg"));n("2qtc");var p,g,E,w=a(n("kLXV")),b=r(n("q1tI")),D=n("MuoO"),I=a(n("3a4m")),y=a(n("K/z9")),x=a(n("vqzs")),C=w.default.confirm,k=(p=(0,D.connect)(function(e){var t=e.device,n=e.loading;return{device:t,loading:n.models.device}}),p((E=function(e){function t(){var e,n;(0,o.default)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return n=(0,s.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(r))),n.state={mapVisual:!1},n.columns=[{title:"\u5e8f\u53f7",width:50,align:"center",key:"DeviceId",dataIndex:"DeviceId",fixed:"left",render:function(e,t,n){return n+1}},{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"DeviceName",align:"left",fixed:"left",width:140},{title:"\u8fde\u63a5\u53c2\u6570",align:"center",fixed:"left",sorter:function(e,t){return e.DeviceIp.localeCompare(t.DeviceIp)},width:160,render:function(e,t){return"".concat(t.DeviceIp,":").concat(t.DevicePort)}},{title:"\u5b89\u88c5\u5730\u5740/\u5e8f\u5217\u53f7",dataIndex:"SerialNumber",align:"center",width:325,render:function(e,t,n){return b.default.createElement("div",null,t.DeviceAddress,b.default.createElement("br",null),e)}},{title:"\u72b6\u6001",dataIndex:"DeviceStatus",align:"center",sorter:function(e,t){return e.DeviceStatus-t.DeviceStatus},width:60,render:function(e,t){var n=e+"",a=n.substr(0,1),r=n.substr(1,1),l=n.substr(2,1);return"1"===a&&"1"===r&&"1"===l?b.default.createElement(c.default,{color:"green"},"\u5728\u7ebf"):"1"===a&&"4"===r&&"1"===l?b.default.createElement("div",null,b.default.createElement(c.default,{color:"green"},"\u5728\u7ebf"),b.default.createElement(c.default,{color:"red"},"\u706f\u73e0\u5f02\u5e38")):"1"===a&&"4"===r&&"4"===l?b.default.createElement("div",null,b.default.createElement(c.default,{color:"green"},"\u5728\u7ebf"),b.default.createElement(c.default,{color:"red"},"\u706f\u73e0\u5f02\u5e38"),b.default.createElement(c.default,{color:"red"},"\u6e29\u5ea6\u5f02\u5e38")):"1"===a&&"1"===r&&"4"===l?b.default.createElement("div",null,b.default.createElement(c.default,{color:"green"},"\u5728\u7ebf"),b.default.createElement(c.default,{color:"red"},"\u6e29\u5ea6\u5f02\u5e38")):"4"===a&&"1"===r&&"1"===l?b.default.createElement(c.default,{color:"red"},"\u79bb\u7ebf"):"4"===a&&"4"===r&&"1"===l?b.default.createElement("div",null,b.default.createElement(c.default,{color:"red"},"\u79bb\u7ebf"),b.default.createElement(c.default,{color:"red"},"\u706f\u73e0\u5f02\u5e38")):"4"===a&&"1"===r&&"4"===l?b.default.createElement("div",null,b.default.createElement(c.default,{color:"red"},"\u79bb\u7ebf"),b.default.createElement(c.default,{color:"red"},"\u6e29\u5ea6\u5f02\u5e38")):"4"===a&&"4"===r&&"4"===l?b.default.createElement("div",null,b.default.createElement(c.default,{color:"red"},"\u79bb\u7ebf"),b.default.createElement(c.default,{color:"red"},"\u706f\u73e0\u5f02\u5e38"),b.default.createElement(c.default,{color:"red"},"\u6e29\u5ea6\u5f02\u5e38")):void 0}},{title:"\u5c5e\u6027",dataIndex:"DeviceAttribute",sorter:function(e,t){return e.DeviceAttribute-t.DeviceAttribute},align:"center",width:60,render:function(e,t){switch(e){case 1:return"\u5e38\u4eae";case 2:return"\u9891\u95ea";case 3:return"\u7206\u95ea";default:return"-"}}},{title:"\u6700\u5927\u529f\u7387",dataIndex:"PowerTotal",align:"center",width:80,render:function(e){return Math.round(e/100)}},{title:"\u8865\u5149\u6a21\u5f0f",dataIndex:"LightMode",align:"center",width:100,render:function(e,t){if(3===t.DeviceAttribute)return"-";switch(e){case 1:return"\u5149\u654f\u63a7\u5236";case 2:return"\u5b9a\u65f6\u63a7\u5236";case 3:return"\u5168\u5929\u5e38\u4eae";default:return"-"}}},{title:"\u5149\u654f\u9600\u503c",dataIndex:"DeviceLightThreshold",align:"center",width:80,render:function(e,t){return 3!==t.DeviceAttribute&&1===t.LightMode?e:"-"}},{title:"\u4eae\u5ea6",dataIndex:"DeviceBrightness",width:50,align:"center",render:function(e,t){return 1===t.DeviceAttribute?e:"-"}},{title:"\u7206\u95ea\u65f6\u95f4",dataIndex:"FlashDuration",width:80,align:"center",render:function(e,t){return 3===t.DeviceAttribute?e:"-"}},{title:"\u7206\u95ea\u6b21\u6570",dataIndex:"StrobeCount",width:80,align:"center",render:function(e,t){return 3===t.DeviceAttribute?e:"-"}},{title:"\u6e29\u5ea6",dataIndex:"DeviceTemperature",width:50,align:"center"},{title:"\u5206\u7ec4",dataIndex:"GroupName",align:"left",sorter:function(e,t){return e.GroupName.localeCompare(t.GroupName)},width:160},{title:"\u53d8\u500d\u8c03\u8282",align:"center",fixed:"right",width:90,render:function(e,t,a){return b.default.createElement("div",null,b.default.createElement(c.default,{onClick:function(){return n.handlePlus(t.SerialNumber)},color:"magenta"},b.default.createElement(u.default,{type:"plus"})),b.default.createElement(c.default,{onClick:function(){return n.handleMinus(t.SerialNumber)},color:"blue"},b.default.createElement(u.default,{type:"minus"})))}},{title:"\u64cd\u4f5c",width:160,fixed:"right",align:"center",render:function(e,t,a){return b.default.createElement("div",null,b.default.createElement(i.default,{onClick:function(){return n.edit(t)},icon:"edit",size:"small",ghost:!0,type:"primary"},"\u7f16\u8f91"),b.default.createElement(i.default,{onClick:function(){return n.showConfirm(t)},size:"small",icon:"delete",ghost:!0,type:"danger",style:{marginLeft:"".concat(6,"px")}},"\u79fb\u9664"))}}],n.handlePlus=function(e){var t=n.props.dispatch;t({type:"device/handlePlus",payload:e})},n.handleMinus=function(e){var t=n.props.dispatch;t({type:"device/handleMinus",payload:e})},n.getAddedDevice=function(){var e=n.props.dispatch;e({type:"device/getAddedDevice"})},n.refresh=function(){n.getAddedDevice()},n.edit=function(e){I.default.push({pathname:"/device/manage/edit",state:e})},n.remoteDevice=function(e){var t=n.props.dispatch;t({type:"device/removeAddedDevice",payload:e}).then(function(e){e&&n.refresh()})},n.showConfirm=function(e){var t=(0,v.default)(n);C({title:"\u79fb\u9664\u8bbe\u5907?",content:"\u70b9\u51fb\u786e\u5b9a\u6309\u94ae\uff0c\u5c06\u4f1a\u4ece\u8bbe\u5907\u7ba1\u7406\u5217\u8868\u4e2d\u5220\u9664\u8bbe\u5907",onOk:function(){t.remoteDevice(e.DeviceId)},onCancel:function(){}})},n.showMap=function(){n.setState({mapVisual:!0})},n.handleMapCancle=function(){n.setState({mapVisual:!1})},n}return(0,h.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.getAddedDevice();var t=setInterval(function(){e.refresh()},9e3);this.setState({timer:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"render",value:function(){var e=this.props,t=e.device,n=e.loading,a=this.state.mapVisual,r=[];return t.addedDeviceList.forEach(function(e){r.push({lat:e.Latitude,lng:e.Longitude,details:e})}),b.default.createElement(l.default,{title:"\u8bbe\u5907\u7ba1\u7406"},b.default.createElement("div",{className:y.default.btnGroup},b.default.createElement(i.default,{icon:"global",onClick:this.showMap,className:y.default.btnItem,type:"primary",ghost:!0},"\u5730\u56fe\u663e\u793a"),b.default.createElement(i.default,{icon:"sync",onClick:this.refresh,className:y.default.btnItem,type:"primary",ghost:!0},"\u5237\u65b0")),b.default.createElement(d.default,{rowKey:"DeviceId",bordered:!0,size:"small",scroll:{x:1740},loading:n,dataSource:t.addedDeviceList,columns:this.columns}),b.default.createElement(w.default,{visible:a,title:"\u5206\u5e03\u60c5\u51b5",width:1024,onCancel:this.handleMapCancle,footer:[b.default.createElement(i.default,{key:"back",onClick:this.handleMapCancle},"\u5173\u95ed")]},b.default.createElement(x.default,{loading:n,searchShow:"block",value:r,onChange:this.setPoint})))}}]),t}(b.Component),g=E))||g),A=k;t.default=A}}]);